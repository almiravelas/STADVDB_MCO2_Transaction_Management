        <!--GLOBAL FAILURE RECOVERY SECTION -->
        <section id="failure-section" class="content-section">
            <div class="card-clean">
                <h2 style="margin:0;">Failure Recovery Simulator</h2>
                <p style="color:#A3AED0; font-size:13px; margin:5px 0 20px 0;">Simulate node failures, recovery, and replica synchronization.</p>
            
            <!-- NODE CONTROLS -->
            <div class="node-grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-top:20px;">
            
                <!-- Node 0 (Central) -->
                <div class="card-clean" style="text-align:center;">
                    <h3>Central Node (0)</h3>
                    <p id="node1-status" style="font-size:14px; color:#34B53A;">ONLINE</p>
                    <p style="font-size:12px; color:#A3AED0; margin-top:5px;">Master Database</p>
                    <div id="node0-queue" style="font-size:11px; color:#FFA500; margin-top:5px;">Queue: 0</div>
                    <button class="btn-primary" onclick="toggleNode(0, this)"><i class='bx bx-power-off'></i> Toggle</button>
                </div>

                <!-- Node 1 (Partition 1) -->
                <div class="card-clean" style="text-align:center;">
                    <h3>Partition 1 (Node 1)</h3>
                    <p id="node2-status" style="font-size:14px; color:#34B53A;">ONLINE</p>
                    <p style="font-size:12px; color:#A3AED0; margin-top:5px;">Countries A-L</p>
                    <div id="node1-queue" style="font-size:11px; color:#FFA500; margin-top:5px;">Queue: 0</div>
                    <button class="btn-primary" onclick="toggleNode(1, this)"><i class='bx bx-power-off'></i> Toggle</button>
                </div>

                <!-- Node 2 (Partition 2) -->
                <div class="card-clean" style="text-align:center;">
                    <h3>Partition 2 (Node 2)</h3>
                    <p id="node3-status" style="font-size:14px; color:#34B53A;">ONLINE</p>
                    <p style="font-size:12px; color:#A3AED0; margin-top:5px;">Countries M-Z</p>
                    <div id="node2-queue" style="font-size:11px; color:#FFA500; margin-top:5px;">Queue: 0</div>
                    <button class="btn-primary" onclick="toggleNode(2, this)"><i class='bx bx-power-off'></i> Toggle</button>
                </div>
            </div>

            <!-- RECOVERY MONITOR STATUS -->
            <div class="card-clean" style="margin-top:20px; padding:15px; border-left: 4px solid #7C3AED;">
                <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px;">
                    <div>
                        <h3 style="margin:0;"><i class='bx bx-sync bx-spin' style="color:#7C3AED;"></i> Background Recovery Monitor</h3>
                        <p style="color:#A3AED0; font-size:12px; margin:5px 0 0 0;">Auto-recovers queued writes every 10s</p>
                    </div>
                    <span style="background:#E2FBD7; color:#34B53A; padding:5px 12px; border-radius:20px; font-size:12px; font-weight:600;">ACTIVE</span>
                </div>
            </div>

            <!-- TEST CASES -->
            <h3 style="margin-top:30px;">Replication & Recovery Test Cases</h3>
            <div class="test-case-grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap:10px; margin-top:15px;">
            
                <!-- Case 1 -->
                <div class="card-clean" style="text-align:center; padding:15px;">
                    <h4 style="margin:0 0 5px 0;">Case #1</h4>
                    <p style="font-size:11px; color:#A3AED0; height:40px;">Partition → Central replication fails</p>
                    <button class="btn-primary" onclick="runCase1()" style="width:100%;">
                        <i class='bx bx-play-circle'></i> Run
                    </button>
                </div>

                <!-- Case 2 -->
                <div class="card-clean" style="text-align:center; padding:15px;">
                    <h4 style="margin:0 0 5px 0;">Case #2</h4>
                    <p style="font-size:11px; color:#A3AED0; height:40px;">Central recovers after missed writes</p>
                    <button class="btn-primary" onclick="runCase2()" style="width:100%;">
                        <i class='bx bx-play-circle'></i> Run
                    </button>
                </div>

                <!-- Case 3 -->
                <div class="card-clean" style="text-align:center; padding:15px; border: 2px solid #4318FF;">
                    <h4 style="margin:0 0 5px 0; color:#4318FF;">Case #3</h4>
                    <p style="font-size:11px; color:#A3AED0; height:40px;">Central → Partition replication fails</p>
                    <button class="btn-primary" onclick="runCase3()" style="width:100%; background:#4318FF;">
                        <i class='bx bx-play-circle'></i> Run
                    </button>
                </div>

                <!-- Case 4 -->
                <div class="card-clean" style="text-align:center; padding:15px; border: 2px solid #4318FF;">
                    <h4 style="margin:0 0 5px 0; color:#4318FF;">Case #4</h4>
                    <p style="font-size:11px; color:#A3AED0; height:40px;">Partition recovers after missed writes</p>
                    <button class="btn-primary" onclick="runCase4()" style="width:100%; background:#4318FF;">
                        <i class='bx bx-play-circle'></i> Run
                    </button>
                </div>
            </div>

            <!-- CONCURRENT TRANSACTIONS TEST -->
            <div class="card-clean" style="margin-top:20px; padding:15px;">
                <h3 style="margin:0;">Concurrent Transactions During Failure</h3>
                <p style="color:#A3AED0; font-size:12px; margin:5px 0 10px 0;">Simulate multiple users performing transactions while a node is down</p>
                <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                    <div style="display:flex; align-items:center; gap:5px;">
                        <label style="font-size:13px;">Count:</label>
                        <input type="number" id="concurrent-count" value="5" min="1" max="20" style="padding:5px; width:60px; border-radius:5px; border:1px solid #E9EDF7;">
                    </div>
                    <div style="display:flex; align-items:center; gap:5px;">
                        <label style="font-size:13px;">Delay (ms):</label>
                        <input type="number" id="concurrent-delay" value="500" min="0" max="5000" step="100" style="padding:5px; width:70px; border-radius:5px; border:1px solid #E9EDF7;">
                    </div>
                    <button class="btn-primary" onclick="runConcurrentTest()" style="margin-left:auto; flex-shrink:0;">
                        <i class='bx bx-refresh'></i> <span class="hide-mobile">Run </span>Test
                    </button>
                </div>
            </div>

        <h3 style="margin-top:30px;">Event Log</h3>
        <div style="display:flex; gap:10px; margin-bottom:10px;">
            <button class="btn-primary" onclick="clearLog()" style="background:#FFA500;">
                <i class='bx bx-trash'></i> Clear Log
            </button>
            <button class="btn-primary" onclick="refreshQueueStatus()" style="background:#34B53A;">
                <i class='bx bx-refresh'></i> Refresh Queue
            </button>
        </div>
        <div class="log-box" id="failureLog">System idle...</div>
    </div>
</section>
